<?xml version="1.0" encoding="UTF-8"?>
<flow xmlns="http://www.springframework.org/schema/webflow"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/webflow
        http://www.springframework.org/schema/webflow/spring-webflow-2.0.xsd" start-state="menu_prompt">
    
  
    <action-state id="menu_prompt">
   		<evaluate expression="prompt" result="flowScope.menu_prompt"></evaluate>
   	
    	<!-- Esto lo podemos hacer con un set. Aporta claridad? -->
    	<evaluate expression="flowScope.menu_prompt.setMessage('Menu')"></evaluate>
    	
    	<evaluate expression="flowProcessor.process(flowScope.menu_prompt)">
    		<attribute name="name" value="complete"/>
    	</evaluate>
    	<transition on="complete.success" to="option_1_prompt" />
    </action-state>
    
    <action-state id="option_1_prompt">
   		<evaluate expression="prompt" result="flowScope.option1_prompt"></evaluate>
   	
    	<!-- Esto lo podemos hacer con un set. Aporta claridad? -->
    	<evaluate expression="flowScope.option1__prompt.setMessage('Opcion 1')"></evaluate>
    	
    	<evaluate expression="flowProcessor.process(flowScope.option1_prompt)">
    		<attribute name="name" value="complete"/>
    	</evaluate>
    	<transition on="complete.success" to="option_2_prompt" />
    </action-state>
    
      <action-state id="option_2_prompt">
   		<evaluate expression="prompt" result="flowScope.option2_prompt"></evaluate>
   	
    	<!-- Esto lo podemos hacer con un set. Aporta claridad? -->
    	<evaluate expression="flowScope.option2_prompt.setMessage('Opcion 2')"></evaluate>
    	
    	<evaluate expression="flowProcessor.process(flowScope.option2_prompt)">
    		<attribute name="name" value="complete"/>
    	</evaluate>
    	<transition on="complete.success" to="input" />
    </action-state>
   
	<action-state id="input">
   		<evaluate expression="input" result="flowScope.personalData_input"></evaluate>
   		<evaluate expression="flowScope.personalData_input.setName('option')"></evaluate>
    	<evaluate expression="flowProcessor.process(flowScope.personalData_input)">
    		<attribute name="name" value="complete"/>
    	</evaluate>
    	<transition on="complete.success" to="render" />
    </action-state>
    
  
    <view-state id="render" view="render">
    	<transition on="continue" to="Resultprompt" />
    	 <on-exit>
             <set name="flowScope.personalData_input.value" value="requestParameters.id"/> <!-- Si hacemos esto asi por que no el resto? -->
         </on-exit>             	
    </view-state>
    
    <action-state id="Resultprompt">
   		<evaluate expression="prompt" result="flowScope.result_prompt"></evaluate>
    	
    	<!-- Esto lo podemos hacer con un set. Aporta claridad? -->
    	<evaluate expression="flowScope.result_prompt.setMessage(flowScope.personalData_input.value)"></evaluate>
    	
    	<evaluate expression="flowProcessor.process(flowScope.result_prompt)">
    		<attribute name="name" value="complete"/>
    	</evaluate>
    	<transition on="complete.success" to="renderResult" />
    </action-state>
    
    <view-state id="renderResult" view="render">
    	<transition on="continue" to="end" />
    </view-state>
    
    <end-state id="end"></end-state>
   
</flow>